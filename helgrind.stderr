==15847== Helgrind, a thread error detector
==15847== Copyright (C) 2007-2017, and GNU GPL'd, by OpenWorks LLP et al.
==15847== Using Valgrind-3.13.0 and LibVEX; rerun with -h for copyright info
==15847== Command: ./bufstack_test
==15847== 
Vim: Caught deadly signal 'SIGTERM'

Vim: Finished.
Vim: Caught deadly signal 'SIGTERM'

Vim: Finished.
==15847== ---Thread-Announcement------------------------------------------
==15847== 
==15847== Thread #1 is the program's root thread
==15847== 
==15847== ---Thread-Announcement------------------------------------------
==15847== 
==15847== Thread #4 was created
==15847==    at 0x5AC687E: clone (clone.S:71)
==15847==    by 0x578DEC4: create_thread (createthread.c:100)
==15847==    by 0x578DEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==15847==    by 0x4C36A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x4F00A18: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==15847==    by 0x5C9076: std::thread::thread<std::function<void ()>&>(std::function<void ()>&) (thread:126)
==15847==    by 0x5C895F: std::unique_ptr<std::thread, std::default_delete<std::thread> > make_unique<std::thread, std::function<void ()>&>(std::function<void ()>&) (Util.hpp:203)
==15847==    by 0x5C73B3: bufstack::MsgpackFdReader::asyncStartListening() (MsgpackFdReader.cpp:138)
==15847==    by 0x56E06C: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:101)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 1 at 0x1FFEFFF120 by thread #1
==15847== Locks held: none
==15847==    at 0x56F473: load (atomic_base.h:396)
==15847==    by 0x56F473: std::atomic<bool>::load(std::memory_order) const (atomic:111)
==15847==    by 0x56E0A1: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:104)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x6180C2: testing::UnitTest::Run() (gtest.cc:4257)
==15847==    by 0x643F70: RUN_ALL_TESTS() (gtest.h:2233)
==15847== 
==15847== This conflicts with a previous read of size 1 by thread #4
==15847== Locks held: none
==15847==    at 0x54CBD6: store (atomic_base.h:374)
==15847==    by 0x54CBD6: std::atomic<bool>::store(bool, std::memory_order) (atomic:103)
==15847==    by 0x5C85C9: bufstack::MsgpackFdReader::asyncStartListening()::$_1::operator()() const (MsgpackFdReader.cpp:126)
==15847==    by 0x5C846C: std::_Function_handler<void (), bufstack::MsgpackFdReader::asyncStartListening()::$_1>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x5A70EC: void std::__invoke_impl<void, std::function<void ()>>(std::__invoke_other, std::function<void ()>&&) (invoke.h:60)
==15847==    by 0x5A707C: std::__invoke_result<std::function<void ()>>::type std::__invoke<std::function<void ()>>(std::function<void ()>&&) (invoke.h:95)
==15847==    by 0x5A7054: _ZNSt6thread8_InvokerISt5tupleIJSt8functionIFvvEEEEE9_M_invokeIJLm0EEEEDTclsr3stdE8__invokespcl10_S_declvalIXT_EEEEESt12_Index_tupleIJXspT_EEE (thread:234)
==15847==    by 0x5A6F34: std::thread::_Invoker<std::tuple<std::function<void ()> > >::operator()() (thread:243)
==15847==  Address 0x1ffefff120 is on thread #1's stack
==15847==  in frame #0, created by std::atomic<bool>::load(std::memory_order) const (atomic_base.h:111)
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 4 at 0x1FFEFFF3D8 by thread #1
==15847== Locks held: none
==15847==    at 0x57A92F: testing::AssertionResult testing::internal::CmpHelperEQ<int, int>(char const*, char const*, int const&, int const&) (gtest.h:1392)
==15847==    by 0x56F613: testing::AssertionResult testing::internal::EqHelper<false>::Compare<int, int>(char const*, char const*, int const&, int const&) (gtest.h:1421)
==15847==    by 0x56E196: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:109)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x6180C2: testing::UnitTest::Run() (gtest.cc:4257)
==15847== 
==15847== This conflicts with a previous write of size 4 by thread #4
==15847== Locks held: none
==15847==    at 0x56EB81: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody()::$_0::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (MsgpackFdReaderTests.cpp:72)
==15847==    by 0x56E9D1: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody()::$_0>::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==    by 0x5CC3F7: std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (std_function.h:706)
==15847==    by 0x5CA63C: (anonymous namespace)::ReadDecoder<std::chrono::duration<long, std::ratio<1l, 1000l> > >::doRead(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>&, bufstack::Interruptible&) (MsgpackReaderUnpacker.cpp:203)
==15847==    by 0x5C98B5: bufstack::MsgpackReaderUnpacker::readFd(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>) (MsgpackReaderUnpacker.cpp:279)
==15847==    by 0x5C863B: bufstack::MsgpackFdReader::asyncStartListening()::$_1::operator()() const (MsgpackFdReader.cpp:131)
==15847==    by 0x5C846C: std::_Function_handler<void (), bufstack::MsgpackFdReader::asyncStartListening()::$_1>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==  Address 0x1ffefff3d8 is on thread #1's stack
==15847==  in frame #2, created by bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:53)
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 1 at 0x1FFEFFF3DF by thread #1
==15847== Locks held: none
==15847==    at 0x56D000: _ZN7testing15AssertionResultC2IbEERKT_PNS_8internal8EnableIfIXntsr8internal21ImplicitlyConvertibleIS2_S0_EE5valueEE4typeE (gtest.h:277)
==15847==    by 0x56E2EF: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:110)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x6180C2: testing::UnitTest::Run() (gtest.cc:4257)
==15847==    by 0x643F70: RUN_ALL_TESTS() (gtest.h:2233)
==15847== 
==15847== This conflicts with a previous write of size 1 by thread #4
==15847== Locks held: none
==15847==    at 0x56EDEF: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody()::$_0::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (MsgpackFdReaderTests.cpp:82)
==15847==    by 0x56E9D1: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody()::$_0>::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==    by 0x5CC3F7: std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (std_function.h:706)
==15847==    by 0x5CA63C: (anonymous namespace)::ReadDecoder<std::chrono::duration<long, std::ratio<1l, 1000l> > >::doRead(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>&, bufstack::Interruptible&) (MsgpackReaderUnpacker.cpp:203)
==15847==    by 0x5C98B5: bufstack::MsgpackReaderUnpacker::readFd(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>) (MsgpackReaderUnpacker.cpp:279)
==15847==    by 0x5C863B: bufstack::MsgpackFdReader::asyncStartListening()::$_1::operator()() const (MsgpackFdReader.cpp:131)
==15847==    by 0x5C846C: std::_Function_handler<void (), bufstack::MsgpackFdReader::asyncStartListening()::$_1>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==  Address 0x1ffefff3df is on thread #1's stack
==15847==  in frame #1, created by bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:53)
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x1FFEFFF318 by thread #1
==15847== Locks held: none
==15847==    at 0x5C715B: bufstack::MsgpackFdReader::~MsgpackFdReader() (MsgpackFdReader.cpp:97)
==15847==    by 0x5C72A2: bufstack::MsgpackFdReader::~MsgpackFdReader() (MsgpackFdReader.cpp:97)
==15847==    by 0x56E687: bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:114)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x6180C2: testing::UnitTest::Run() (gtest.cc:4257)
==15847== 
==15847== This conflicts with a previous read of size 8 by thread #4
==15847== Locks held: none
==15847==    at 0x5C8603: bufstack::MsgpackFdReader::asyncStartListening()::$_1::operator()() const (MsgpackFdReader.cpp:131)
==15847==    by 0x5C846C: std::_Function_handler<void (), bufstack::MsgpackFdReader::asyncStartListening()::$_1>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x5A70EC: void std::__invoke_impl<void, std::function<void ()>>(std::__invoke_other, std::function<void ()>&&) (invoke.h:60)
==15847==    by 0x5A707C: std::__invoke_result<std::function<void ()>>::type std::__invoke<std::function<void ()>>(std::function<void ()>&&) (invoke.h:95)
==15847==    by 0x5A7054: _ZNSt6thread8_InvokerISt5tupleIJSt8functionIFvvEEEEE9_M_invokeIJLm0EEEEDTclsr3stdE8__invokespcl10_S_declvalIXT_EEEEESt12_Index_tupleIJXspT_EEE (thread:234)
==15847==    by 0x5A6F34: std::thread::_Invoker<std::tuple<std::function<void ()> > >::operator()() (thread:243)
==15847==    by 0x5C9298: std::thread::_State_impl<std::thread::_Invoker<std::tuple<std::function<void ()> > > >::_M_run() (thread:186)
==15847==  Address 0x1ffefff318 is on thread #1's stack
==15847==  in frame #2, created by bufstack::MsgpackFdReaderTests_TestWriteHelloWorld_Test::TestBody() (MsgpackFdReaderTests.cpp:53)
==15847== 
==15847== ---Thread-Announcement------------------------------------------
==15847== 
==15847== Thread #6 was created
==15847==    at 0x5AC687E: clone (clone.S:71)
==15847==    by 0x578DEC4: create_thread (createthread.c:100)
==15847==    by 0x578DEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==15847==    by 0x4C36A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x4F00A18: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==15847==    by 0x5C9076: std::thread::thread<std::function<void ()>&>(std::function<void ()>&) (thread:126)
==15847==    by 0x5C895F: std::unique_ptr<std::thread, std::default_delete<std::thread> > make_unique<std::thread, std::function<void ()>&>(std::function<void ()>&) (Util.hpp:203)
==15847==    by 0x5C73B3: bufstack::MsgpackFdReader::asyncStartListening() (MsgpackFdReader.cpp:138)
==15847==    by 0x599D94: bufstack::AbstractMsgpackClient::asyncStartListening(int)::$_1::operator()(bufstack::MsgpackFdReader&) const (AbstractMsgpackClient.cpp:50)
==15847==    by 0x599C51: std::_Function_handler<void (bufstack::MsgpackFdReader&), bufstack::AbstractMsgpackClient::asyncStartListening(int)::$_1>::_M_invoke(std::_Any_data const&, bufstack::MsgpackFdReader&) (std_function.h:316)
==15847==    by 0x59B0E7: std::function<void (bufstack::MsgpackFdReader&)>::operator()(bufstack::MsgpackFdReader&) const (std_function.h:706)
==15847==    by 0x598B16: bufstack::AbstractMsgpackClient::startListening(int, std::function<void (bufstack::MsgpackFdReader&)>) (AbstractMsgpackClient.cpp:33)
==15847==    by 0x598F1C: bufstack::AbstractMsgpackClient::asyncStartListening(int) (AbstractMsgpackClient.cpp:50)
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x5DF6BD0 by thread #1
==15847== Locks held: none
==15847==    at 0x57C98B: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:31)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847== 
==15847== This conflicts with a previous read of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x59883C: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847==    by 0x59CFC7: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::__call<void, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, 0ul, 1ul>(std::tuple<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>&&, std::_Index_tuple<0ul, 1ul>) (functional:467)
==15847==    by 0x59CF2C: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, void>(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (functional:549)
==15847==    by 0x59CB21: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)> >::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==    by 0x5CC3F7: std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (std_function.h:706)
==15847==    by 0x5CA63C: (anonymous namespace)::ReadDecoder<std::chrono::duration<long, std::ratio<1l, 1000l> > >::doRead(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>&, bufstack::Interruptible&) (MsgpackReaderUnpacker.cpp:203)
==15847==  Address 0x5df6bd0 is 0 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x5DF6D78 by thread #1
==15847== Locks held: none
==15847==    at 0x57C98E: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:31)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847== 
==15847== This conflicts with a previous read of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5D51D5: bufstack::MsgpackReceiver::onRecvMsg(msgpack::v2::object const&) (MsgpackReceiver.cpp:106)
==15847==    by 0x59886B: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847==    by 0x59CFC7: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::__call<void, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, 0ul, 1ul>(std::tuple<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>&&, std::_Index_tuple<0ul, 1ul>) (functional:467)
==15847==    by 0x59CF2C: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, void>(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (functional:549)
==15847==    by 0x59CB21: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)> >::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==    by 0x5CC3F7: std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (std_function.h:706)
==15847==  Address 0x5df6d78 is 424 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x5DF6DA8 by thread #1
==15847== Locks held: none
==15847==    at 0x57C995: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:31)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847== 
==15847== This conflicts with a previous read of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5D51E6: bufstack::MsgpackReceiver::onRecvMsg(msgpack::v2::object const&) (MsgpackReceiver.cpp:106)
==15847==    by 0x59886B: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847==    by 0x59CFC7: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::__call<void, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, 0ul, 1ul>(std::tuple<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>&&, std::_Index_tuple<0ul, 1ul>) (functional:467)
==15847==    by 0x59CF2C: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, void>(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (functional:549)
==15847==    by 0x59CB21: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)> >::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==    by 0x5CC3F7: std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (std_function.h:706)
==15847==  Address 0x5df6da8 is 472 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DF6D78 by thread #6
==15847== Locks held: none
==15847==    at 0x5D4D6C: bufstack::MsgpackReceiver::handleResponseMessage(std::vector<msgpack::v2::object, std::allocator<msgpack::v2::object> > const&) (MsgpackReceiver.cpp:76)
==15847==    by 0x5D5794: bufstack::MsgpackReceiver::onRecvMsg(msgpack::v2::object const&) (MsgpackReceiver.cpp:153)
==15847==    by 0x59886B: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847==    by 0x59CFC7: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::__call<void, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, 0ul, 1ul>(std::tuple<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>&&, std::_Index_tuple<0ul, 1ul>) (functional:467)
==15847==    by 0x59CF2C: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, void>(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (functional:549)
==15847==    by 0x59CB21: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)> >::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==    by 0x5CC3F7: std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) const (std_function.h:706)
==15847==    by 0x5CA63C: (anonymous namespace)::ReadDecoder<std::chrono::duration<long, std::ratio<1l, 1000l> > >::doRead(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>&, bufstack::Interruptible&) (MsgpackReaderUnpacker.cpp:203)
==15847==    by 0x5C98B5: bufstack::MsgpackReaderUnpacker::readFd(int, std::function<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>) (MsgpackReaderUnpacker.cpp:279)
==15847==    by 0x5C863B: bufstack::MsgpackFdReader::asyncStartListening()::$_1::operator()() const (MsgpackFdReader.cpp:131)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #1
==15847== Locks held: none
==15847==    at 0x57C98E: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:31)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==  Address 0x5df6d78 is 424 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ---Thread-Announcement------------------------------------------
==15847== 
==15847== Thread #7 was created
==15847==    at 0x5AC687E: clone (clone.S:71)
==15847==    by 0x578DEC4: create_thread (createthread.c:100)
==15847==    by 0x578DEC4: pthread_create@@GLIBC_2.2.5 (pthread_create.c:797)
==15847==    by 0x4C36A27: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x4F00A18: std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==15847==    by 0x5E9D48: std::thread::thread<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>::_Async_state_impl(std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&)::{lambda()#1}>(std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>::_Async_state_impl(std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&)::{lambda()#1}&&) (thread:126)
==15847==    by 0x5E9C2E: std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>::_Async_state_impl(std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (future:1664)
==15847==    by 0x5E9B70: void __gnu_cxx::new_allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >::construct<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > > >(std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>*, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (new_allocator.h:136)
==15847==    by 0x5E990C: void std::allocator_traits<std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> > >::construct<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > > >(std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >&, std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>*, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (alloc_traits.h:475)
==15847==    by 0x5E9699: std::_Sp_counted_ptr_inplace<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>, std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > > >(std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (shared_ptr_base.h:526)
==15847==    by 0x5E947F: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>, std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > > >(std::_Sp_make_shared_tag, std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>*, std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> > const&, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (shared_ptr_base.h:637)
==15847==    by 0x5E9385: std::__shared_ptr<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > > >(std::_Sp_make_shared_tag, std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> > const&, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (shared_ptr_base.h:1294)
==15847==    by 0x5E931C: std::shared_ptr<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >::shared_ptr<std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> >, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > > >(std::_Sp_make_shared_tag, std::allocator<std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >, void> > const&, std::thread::_Invoker<std::tuple<std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()> > >&&) (shared_ptr.h:344)
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5E02C70 by thread #6
==15847== Locks held: none
==15847==    at 0x59DF44: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::__normal_iterator(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>* const&) (stl_iterator.h:780)
==15847==    by 0x59DD83: std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::begin() (stl_vector.h:564)
==15847==    by 0x59A690: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==    by 0x59B3F4: void AtomicAccess<std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::access<void>(std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>) (AtomicAccess.hpp:32)
==15847==    by 0x5993CF: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&) (AbstractMsgpackClient.cpp:77)
==15847==    by 0x5D4DEB: bufstack::MsgpackReceiver::handleResponseMessage(std::vector<msgpack::v2::object, std::allocator<msgpack::v2::object> > const&) (MsgpackReceiver.cpp:76)
==15847==    by 0x5D5794: bufstack::MsgpackReceiver::onRecvMsg(msgpack::v2::object const&) (MsgpackReceiver.cpp:153)
==15847==    by 0x59886B: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #7
==15847== Locks held: none
==15847==    at 0x59DA9A: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:451)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==    by 0x59A1C1: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Address 0x5e02c70 is 0 bytes inside a block of size 24 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5C537D: AtomicAccess<std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::AtomicAccess(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >) (AtomicAccess.hpp:57)
==15847==    by 0x5C505D: bufstack::AbstractMsgpackClient::AbstractMsgpackClient() (AbstractMsgpackClient.hpp:244)
==15847==    by 0x5C4AC8: bufstack::MsgpackClient::MsgpackClient(std::shared_ptr<bufstack::ClientConnection>) (MsgpackClient.cpp:11)
==15847==    by 0x5DC83D: bufstack::NvimClient::NvimClient(std::shared_ptr<bufstack::ClientConnection>, bool, bool) (NvimClient.cpp:125)
==15847==    by 0x57C94D: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:30)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5E02C78 by thread #6
==15847== Locks held: none
==15847==    at 0x59DF44: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::__normal_iterator(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>* const&) (stl_iterator.h:780)
==15847==    by 0x59DB07: std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::end() (stl_vector.h:582)
==15847==    by 0x59A69D: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==    by 0x59B3F4: void AtomicAccess<std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::access<void>(std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>) (AtomicAccess.hpp:32)
==15847==    by 0x5993CF: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&) (AbstractMsgpackClient.cpp:77)
==15847==    by 0x5D4DEB: bufstack::MsgpackReceiver::handleResponseMessage(std::vector<msgpack::v2::object, std::allocator<msgpack::v2::object> > const&) (MsgpackReceiver.cpp:76)
==15847==    by 0x5D5794: bufstack::MsgpackReceiver::onRecvMsg(msgpack::v2::object const&) (MsgpackReceiver.cpp:153)
==15847==    by 0x59886B: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #7
==15847== Locks held: none
==15847==    at 0x59DAA1: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:452)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==    by 0x59A1C1: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Address 0x5e02c78 is 8 bytes inside a block of size 24 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5C537D: AtomicAccess<std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::AtomicAccess(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >) (AtomicAccess.hpp:57)
==15847==    by 0x5C505D: bufstack::AbstractMsgpackClient::AbstractMsgpackClient() (AbstractMsgpackClient.hpp:244)
==15847==    by 0x5C4AC8: bufstack::MsgpackClient::MsgpackClient(std::shared_ptr<bufstack::ClientConnection>) (MsgpackClient.cpp:11)
==15847==    by 0x5DC83D: bufstack::NvimClient::NvimClient(std::shared_ptr<bufstack::ClientConnection>, bool, bool) (NvimClient.cpp:125)
==15847==    by 0x57C94D: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:30)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA9B0 by thread #6
==15847== Locks held: none
==15847==    at 0x54C09C: std::_Function_base::_M_empty() const (std_function.h:279)
==15847==    by 0x59EC72: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:704)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==    by 0x59B3F4: void AtomicAccess<std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::access<void>(std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>) (AtomicAccess.hpp:32)
==15847==  Address 0x5dfa9b0 is 16 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x59DFD6: __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::allocate(unsigned long, void const*) (new_allocator.h:111)
==15847==    by 0x59DF7B: std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::allocate(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, unsigned long) (alloc_traits.h:436)
==15847==    by 0x59DDC2: std::_Vector_base<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_allocate(unsigned long) (stl_vector.h:172)
==15847==    by 0x59D849: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:406)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==    by 0x59A1C1: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA9B8 by thread #6
==15847== Locks held: none
==15847==    at 0x59EC89: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==    by 0x59B3F4: void AtomicAccess<std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >::access<void>(std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>) (AtomicAccess.hpp:32)
==15847==    by 0x5993CF: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&) (AbstractMsgpackClient.cpp:77)
==15847==  Address 0x5dfa9b8 is 24 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x59DFD6: __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::allocate(unsigned long, void const*) (new_allocator.h:111)
==15847==    by 0x59DF7B: std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::allocate(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, unsigned long) (alloc_traits.h:436)
==15847==    by 0x59DDC2: std::_Vector_base<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_allocate(unsigned long) (stl_vector.h:172)
==15847==    by 0x59D849: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:406)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==    by 0x59A1C1: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA9A0 by thread #6
==15847== Locks held: none
==15847==    at 0x5E3B85: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_get_pointer(std::_Any_data const&) (std_function.h:174)
==15847==    by 0x5E3928: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Address 0x5dfa9a0 is 0 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x59DFD6: __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::allocate(unsigned long, void const*) (new_allocator.h:111)
==15847==    by 0x59DF7B: std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::allocate(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, unsigned long) (alloc_traits.h:436)
==15847==    by 0x59DDC2: std::_Vector_base<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_allocate(unsigned long) (stl_vector.h:172)
==15847==    by 0x59D849: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:406)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==    by 0x59A1C1: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFAA00 by thread #6
==15847== Locks held: none
==15847==    at 0x5E3BB4: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:217)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Address 0x5dfaa00 is 0 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E59FB: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_clone(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::integral_constant<bool, false>) (std_function.h:192)
==15847==    by 0x5E39D4: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_manager(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::_Manager_operation) (std_function.h:227)
==15847==    by 0x59DBAB: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::function(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> const&) (std_function.h:677)
==15847==    by 0x59DB50: void __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (new_allocator.h:136)
==15847==    by 0x59D7AC: void std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (alloc_traits.h:475)
==15847==    by 0x59D881: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:415)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 4 at 0x5DFAA08 by thread #6
==15847== Locks held: none
==15847==    at 0x5E3BB7: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:219)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847==  Address 0x5dfaa08 is 8 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E59FB: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_clone(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::integral_constant<bool, false>) (std_function.h:192)
==15847==    by 0x5E39D4: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_manager(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::_Manager_operation) (std_function.h:227)
==15847==    by 0x59DBAB: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::function(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> const&) (std_function.h:677)
==15847==    by 0x59DB50: void __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (new_allocator.h:136)
==15847==    by 0x59D7AC: void std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (alloc_traits.h:475)
==15847==    by 0x59D881: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:415)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFAA10 by thread #6
==15847== Locks held: none
==15847==    at 0x5E3878: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr(std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2> const&) (shared_ptr_base.h:1121)
==15847==    by 0x5E0897: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr(std::shared_ptr<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:119)
==15847==    by 0x5E3BD4: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:219)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==  Address 0x5dfaa10 is 16 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E59FB: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_clone(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::integral_constant<bool, false>) (std_function.h:192)
==15847==    by 0x5E39D4: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_manager(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::_Manager_operation) (std_function.h:227)
==15847==    by 0x59DBAB: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::function(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> const&) (std_function.h:677)
==15847==    by 0x59DB50: void __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (new_allocator.h:136)
==15847==    by 0x59D7AC: void std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (alloc_traits.h:475)
==15847==    by 0x59D881: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:415)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFAA18 by thread #6
==15847== Locks held: none
==15847==    at 0x5640F8: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count(std::__shared_count<(__gnu_cxx::_Lock_policy)2> const&) (shared_ptr_base.h:688)
==15847==    by 0x5E3899: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr(std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2> const&) (shared_ptr_base.h:1121)
==15847==    by 0x5E0897: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr(std::shared_ptr<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:119)
==15847==    by 0x5E3BD4: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:219)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==  Address 0x5dfaa18 is 24 bytes inside a block of size 32 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E59FB: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_clone(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::integral_constant<bool, false>) (std_function.h:192)
==15847==    by 0x5E39D4: std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_manager(std::_Any_data&, std::_Function_base::_Base_manager<std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}> const&, std::_Manager_operation) (std_function.h:227)
==15847==    by 0x59DBAB: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::function(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> const&) (std_function.h:677)
==15847==    by 0x59DB50: void __gnu_cxx::new_allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (new_allocator.h:136)
==15847==    by 0x59D7AC: void std::allocator_traits<std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::construct<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (alloc_traits.h:475)
==15847==    by 0x59D881: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::_M_realloc_insert<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:415)
==15847==    by 0x59D75D: void std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >::emplace_back<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&>(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) (vector.tcc:105)
==15847==    by 0x59A050: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (AbstractMsgpackClient.cpp:62)
==15847==    by 0x599F16: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&), bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_2>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) (std_function.h:316)
==15847==    by 0x59EB0F: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&, std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&) const (std_function.h:706)
==15847==    by 0x59A3AB: bufstack::AbstractMsgpackClient::addResponseCallback(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&&)::$_3::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:66)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DF6BD0 by thread #6
==15847== Locks held: none
==15847==    at 0x5E3BDD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:221)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==    by 0x59A749: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>(bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}, bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}) (stl_algo.h:939)
==15847==    by 0x59A6BD: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (AbstractMsgpackClient.cpp:79)
==15847==    by 0x59A541: std::_Function_handler<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&), bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4>::_M_invoke(std::_Any_data const&, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) (std_function.h:316)
==15847==    by 0x59E597: std::function<void (std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&)>::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const (std_function.h:706)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #1
==15847== Locks held: none
==15847==    at 0x57C98B: bufstack::MockNvimClient::MockNvimClient(std::shared_ptr<bufstack::ClientConnection>) (MockNvimClient.hpp:31)
==15847==    by 0x57BB07: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==  Address 0x5df6bd0 is 0 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DF9408 by thread #7
==15847== Locks held: none
==15847==    at 0x564E35: std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::_M_ptr() const (unique_ptr.h:147)
==15847==    by 0x564DF4: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::get() const (unique_ptr.h:337)
==15847==    by 0x564914: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::operator*() const (unique_ptr.h:323)
==15847==    by 0x56488C: std::__future_base::_State_baseV2::wait() (future:338)
==15847==    by 0x5E5C49: std::__basic_future<msgpack::v1::object_handle>::_M_get_result() const (future:717)
==15847==    by 0x5E04E3: std::future<msgpack::v1::object_handle>::get() (future:796)
==15847==    by 0x5E02FF: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==    by 0x5DDC48: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}::operator()() const (NvimClient.cpp:52)
==15847==    by 0x5DDA5C: std::_Function_handler<void (), bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x602913: bufstack::InterruptibleTask::runElement(__gnu_cxx::__normal_iterator<std::function<void ()>*, std::vector<std::function<void ()>, std::allocator<std::function<void ()> > > >) (InterruptibleTask.cpp:48)
==15847==    by 0x602AA6: bufstack::InterruptibleTask::run() (InterruptibleTask.cpp:69)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5A6B5D: std::_Tuple_impl<0ul, std::__future_base::_Result_base*, std::__future_base::_Result_base::_Deleter>::operator=(std::_Tuple_impl<0ul, std::__future_base::_Result_base*, std::__future_base::_Result_base::_Deleter>&&) (tuple:304)
==15847==    by 0x5A6AEF: std::tuple<std::__future_base::_Result_base*, std::__future_base::_Result_base::_Deleter>::operator=(std::tuple<std::__future_base::_Result_base*, std::__future_base::_Result_base::_Deleter>&&) (tuple:1219)
==15847==    by 0x5A68FE: std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::operator=(std::__uniq_ptr_impl<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>&&) (unique_ptr.h:117)
==15847==    by 0x5A6869: _ZSt4swapISt15__uniq_ptr_implINSt13__future_base12_Result_baseENS2_8_DeleterEEENSt9enable_ifIXsr6__and_ISt6__not_ISt15__is_tuple_likeIT_EESt21is_move_constructibleIS8_ESt18is_move_assignableIS8_EEE5valueEvE4typeERS8_SH_ (move.h:199)
==15847==    by 0x5A681C: std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>::swap(std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>&) (unique_ptr.h:384)
==15847==    by 0x5A6526: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:566)
==15847==    by 0x5A6790: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==15847==    by 0x5A669B: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==15847==  Address 0x5df9408 is 24 bytes inside a block of size 48 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E2AE0: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:111)
==15847==    by 0x5E2A4B: std::allocator_traits<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>, (__gnu_cxx::_Lock_policy)2> > >::allocate(std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>, (__gnu_cxx::_Lock_policy)2> >&, unsigned long) (alloc_traits.h:436)
==15847==    by 0x5E2844: std::__allocated_ptr<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>, (__gnu_cxx::_Lock_policy)2> > > std::__allocate_guarded<std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>, (__gnu_cxx::_Lock_policy)2> > >(std::allocator<std::_Sp_counted_ptr_inplace<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>, (__gnu_cxx::_Lock_policy)2> >&) (allocated_ptr.h:104)
==15847==    by 0x5E26E3: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>>(std::_Sp_make_shared_tag, std::__future_base::_State_baseV2*, std::allocator<std::__future_base::_State_baseV2> const&) (shared_ptr_base.h:635)
==15847==    by 0x5E2655: std::__shared_ptr<std::__future_base::_State_baseV2, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::__future_base::_State_baseV2>>(std::_Sp_make_shared_tag, std::allocator<std::__future_base::_State_baseV2> const&) (shared_ptr_base.h:1294)
==15847==    by 0x5E2617: std::shared_ptr<std::__future_base::_State_baseV2>::shared_ptr<std::allocator<std::__future_base::_State_baseV2>>(std::_Sp_make_shared_tag, std::allocator<std::__future_base::_State_baseV2> const&) (shared_ptr.h:344)
==15847==    by 0x5E259B: std::shared_ptr<std::__future_base::_State_baseV2> std::allocate_shared<std::__future_base::_State_baseV2, std::allocator<std::__future_base::_State_baseV2>>(std::allocator<std::__future_base::_State_baseV2> const&) (shared_ptr.h:690)
==15847==    by 0x5E24AF: std::shared_ptr<std::__future_base::_State_baseV2> std::make_shared<std::__future_base::_State_baseV2>() (shared_ptr.h:706)
==15847==    by 0x5E2418: std::promise<msgpack::v1::object_handle>::promise() (future:1056)
==15847==    by 0x5E23EB: void __gnu_cxx::new_allocator<std::promise<msgpack::v1::object_handle> >::construct<std::promise<msgpack::v1::object_handle>>(std::promise<msgpack::v1::object_handle>*) (new_allocator.h:136)
==15847==    by 0x5E21A7: void std::allocator_traits<std::allocator<std::promise<msgpack::v1::object_handle> > >::construct<std::promise<msgpack::v1::object_handle>>(std::allocator<std::promise<msgpack::v1::object_handle> >&, std::promise<msgpack::v1::object_handle>*) (alloc_traits.h:475)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA860 by thread #7
==15847== Locks held: none
==15847==    at 0x5D2778: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E0509: std::future<msgpack::v1::object_handle>::get() (future:796)
==15847==    by 0x5E02FF: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==    by 0x5DDC48: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}::operator()() const (NvimClient.cpp:52)
==15847==    by 0x5DDA5C: std::_Function_handler<void (), bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x602913: bufstack::InterruptibleTask::runElement(__gnu_cxx::__normal_iterator<std::function<void ()>*, std::vector<std::function<void ()>, std::allocator<std::function<void ()> > > >) (InterruptibleTask.cpp:48)
==15847==    by 0x602AA6: bufstack::InterruptibleTask::run() (InterruptibleTask.cpp:69)
==15847==    by 0x5EAC30: void std::__invoke_impl<void, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(std::__invoke_memfun_deref, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:73)
==15847==    by 0x5EAB61: std::__invoke_result<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>::type std::__invoke<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:95)
==15847==    by 0x5EAB1F: void std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()>::__call<void, , 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) (functional:467)
==15847==    by 0x5EAAD5: void std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()>::operator()<, void>() (functional:549)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5D277B: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E516C: std::__future_base::_Result<msgpack::v1::object_handle>::_M_set(msgpack::v1::object_handle&&) (future:258)
==15847==    by 0x5E50AA: std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&>::operator()() const (future:488)
==15847==    by 0x5E4F1E: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&> >::_M_invoke(std::_Any_data const&) (std_function.h:301)
==15847==    by 0x5A67EC: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:706)
==15847==    by 0x5A650B: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==15847==    by 0x5A6790: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==15847==    by 0x5A669B: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==15847==  Address 0x5dfa860 is 16 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E2433: std::promise<msgpack::v1::object_handle>::promise() (future:1057)
==15847==    by 0x5E23EB: void __gnu_cxx::new_allocator<std::promise<msgpack::v1::object_handle> >::construct<std::promise<msgpack::v1::object_handle>>(std::promise<msgpack::v1::object_handle>*) (new_allocator.h:136)
==15847==    by 0x5E21A7: void std::allocator_traits<std::allocator<std::promise<msgpack::v1::object_handle> > >::construct<std::promise<msgpack::v1::object_handle>>(std::allocator<std::promise<msgpack::v1::object_handle> >&, std::promise<msgpack::v1::object_handle>*) (alloc_traits.h:475)
==15847==    by 0x5E1F3E: std::_Sp_counted_ptr_inplace<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<>(std::allocator<std::promise<msgpack::v1::object_handle> >) (shared_ptr_base.h:526)
==15847==    by 0x5E1D46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::promise<msgpack::v1::object_handle>*, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:637)
==15847==    by 0x5E1C65: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:1294)
==15847==    by 0x5E1C27: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:344)
==15847==    by 0x5E1BAB: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::allocate_shared<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:690)
==15847==    by 0x5E082F: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::make_shared<std::promise<msgpack::v1::object_handle>>() (shared_ptr.h:706)
==15847==    by 0x5E03BD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:211)
==15847==    by 0x5E02F2: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA868 by thread #7
==15847== Locks held: none
==15847==    at 0x5D277E: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E0509: std::future<msgpack::v1::object_handle>::get() (future:796)
==15847==    by 0x5E02FF: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==    by 0x5DDC48: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}::operator()() const (NvimClient.cpp:52)
==15847==    by 0x5DDA5C: std::_Function_handler<void (), bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x602913: bufstack::InterruptibleTask::runElement(__gnu_cxx::__normal_iterator<std::function<void ()>*, std::vector<std::function<void ()>, std::allocator<std::function<void ()> > > >) (InterruptibleTask.cpp:48)
==15847==    by 0x602AA6: bufstack::InterruptibleTask::run() (InterruptibleTask.cpp:69)
==15847==    by 0x5EAC30: void std::__invoke_impl<void, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(std::__invoke_memfun_deref, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:73)
==15847==    by 0x5EAB61: std::__invoke_result<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>::type std::__invoke<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:95)
==15847==    by 0x5EAB1F: void std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()>::__call<void, , 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) (functional:467)
==15847==    by 0x5EAAD5: void std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()>::operator()<, void>() (functional:549)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5D2782: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E516C: std::__future_base::_Result<msgpack::v1::object_handle>::_M_set(msgpack::v1::object_handle&&) (future:258)
==15847==    by 0x5E50AA: std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&>::operator()() const (future:488)
==15847==    by 0x5E4F1E: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&> >::_M_invoke(std::_Any_data const&) (std_function.h:301)
==15847==    by 0x5A67EC: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:706)
==15847==    by 0x5A650B: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==15847==    by 0x5A6790: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==15847==    by 0x5A669B: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==15847==  Address 0x5dfa868 is 24 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E2433: std::promise<msgpack::v1::object_handle>::promise() (future:1057)
==15847==    by 0x5E23EB: void __gnu_cxx::new_allocator<std::promise<msgpack::v1::object_handle> >::construct<std::promise<msgpack::v1::object_handle>>(std::promise<msgpack::v1::object_handle>*) (new_allocator.h:136)
==15847==    by 0x5E21A7: void std::allocator_traits<std::allocator<std::promise<msgpack::v1::object_handle> > >::construct<std::promise<msgpack::v1::object_handle>>(std::allocator<std::promise<msgpack::v1::object_handle> >&, std::promise<msgpack::v1::object_handle>*) (alloc_traits.h:475)
==15847==    by 0x5E1F3E: std::_Sp_counted_ptr_inplace<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<>(std::allocator<std::promise<msgpack::v1::object_handle> >) (shared_ptr_base.h:526)
==15847==    by 0x5E1D46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::promise<msgpack::v1::object_handle>*, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:637)
==15847==    by 0x5E1C65: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:1294)
==15847==    by 0x5E1C27: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:344)
==15847==    by 0x5E1BAB: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::allocate_shared<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:690)
==15847==    by 0x5E082F: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::make_shared<std::promise<msgpack::v1::object_handle>>() (shared_ptr.h:706)
==15847==    by 0x5E03BD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:211)
==15847==    by 0x5E02F2: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA870 by thread #7
==15847== Locks held: none
==15847==    at 0x5D2786: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E0509: std::future<msgpack::v1::object_handle>::get() (future:796)
==15847==    by 0x5E02FF: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==    by 0x5DDC48: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}::operator()() const (NvimClient.cpp:52)
==15847==    by 0x5DDA5C: std::_Function_handler<void (), bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x602913: bufstack::InterruptibleTask::runElement(__gnu_cxx::__normal_iterator<std::function<void ()>*, std::vector<std::function<void ()>, std::allocator<std::function<void ()> > > >) (InterruptibleTask.cpp:48)
==15847==    by 0x602AA6: bufstack::InterruptibleTask::run() (InterruptibleTask.cpp:69)
==15847==    by 0x5EAC30: void std::__invoke_impl<void, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(std::__invoke_memfun_deref, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:73)
==15847==    by 0x5EAB61: std::__invoke_result<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>::type std::__invoke<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:95)
==15847==    by 0x5EAB1F: void std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()>::__call<void, , 0ul>(std::tuple<>&&, std::_Index_tuple<0ul>) (functional:467)
==15847==    by 0x5EAAD5: void std::_Bind<void (bufstack::InterruptibleTask::*(bufstack::InterruptibleTask*))()>::operator()<, void>() (functional:549)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5D278A: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E516C: std::__future_base::_Result<msgpack::v1::object_handle>::_M_set(msgpack::v1::object_handle&&) (future:258)
==15847==    by 0x5E50AA: std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&>::operator()() const (future:488)
==15847==    by 0x5E4F1E: std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&> >::_M_invoke(std::_Any_data const&) (std_function.h:301)
==15847==    by 0x5A67EC: std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>::operator()() const (std_function.h:706)
==15847==    by 0x5A650B: std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (future:561)
==15847==    by 0x5A6790: void std::__invoke_impl<void, void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(std::__invoke_memfun_deref, void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:73)
==15847==    by 0x5A669B: std::__invoke_result<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>::type std::__invoke<void (std::__future_base::_State_baseV2::*)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*>(void (std::__future_base::_State_baseV2::*&&)(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*), std::__future_base::_State_baseV2*&&, std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*&&, bool*&&) (invoke.h:95)
==15847==  Address 0x5dfa870 is 32 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E2433: std::promise<msgpack::v1::object_handle>::promise() (future:1057)
==15847==    by 0x5E23EB: void __gnu_cxx::new_allocator<std::promise<msgpack::v1::object_handle> >::construct<std::promise<msgpack::v1::object_handle>>(std::promise<msgpack::v1::object_handle>*) (new_allocator.h:136)
==15847==    by 0x5E21A7: void std::allocator_traits<std::allocator<std::promise<msgpack::v1::object_handle> > >::construct<std::promise<msgpack::v1::object_handle>>(std::allocator<std::promise<msgpack::v1::object_handle> >&, std::promise<msgpack::v1::object_handle>*) (alloc_traits.h:475)
==15847==    by 0x5E1F3E: std::_Sp_counted_ptr_inplace<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<>(std::allocator<std::promise<msgpack::v1::object_handle> >) (shared_ptr_base.h:526)
==15847==    by 0x5E1D46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::promise<msgpack::v1::object_handle>*, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:637)
==15847==    by 0x5E1C65: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:1294)
==15847==    by 0x5E1C27: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:344)
==15847==    by 0x5E1BAB: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::allocate_shared<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:690)
==15847==    by 0x5E082F: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::make_shared<std::promise<msgpack::v1::object_handle>>() (shared_ptr.h:706)
==15847==    by 0x5E03BD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:211)
==15847==    by 0x5E02F2: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5DFA878 by thread #7
==15847== Locks held: none
==15847==    at 0x577BE5: std::__uniq_ptr_impl<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::_M_ptr() const (unique_ptr.h:147)
==15847==    by 0x577BA4: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::get() const (unique_ptr.h:337)
==15847==    by 0x577CE8: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::release() (unique_ptr.h:359)
==15847==    by 0x577C83: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::unique_ptr(std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >&&) (unique_ptr.h:239)
==15847==    by 0x5D27A4: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E0509: std::future<msgpack::v1::object_handle>::get() (future:796)
==15847==    by 0x5E02FF: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==    by 0x5DDC48: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}::operator()() const (NvimClient.cpp:52)
==15847==    by 0x5DDA5C: std::_Function_handler<void (), bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x602913: bufstack::InterruptibleTask::runElement(__gnu_cxx::__normal_iterator<std::function<void ()>*, std::vector<std::function<void ()>, std::allocator<std::function<void ()> > > >) (InterruptibleTask.cpp:48)
==15847==    by 0x602AA6: bufstack::InterruptibleTask::run() (InterruptibleTask.cpp:69)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x577F88: std::_Head_base<0ul, msgpack::v1::zone*, false>::_Head_base<msgpack::v1::zone*&>(msgpack::v1::zone*&) (tuple:133)
==15847==    by 0x577F14: std::_Tuple_impl<0ul, msgpack::v1::zone*, std::default_delete<msgpack::v1::zone> >::_Tuple_impl<msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>, void>(msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>&&) (tuple:218)
==15847==    by 0x577EA1: std::tuple<msgpack::v1::zone*, std::default_delete<msgpack::v1::zone> >::tuple<msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>, true>(msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>&&) (tuple:972)
==15847==    by 0x577DB7: std::__uniq_ptr_impl<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::__uniq_ptr_impl<std::default_delete<msgpack::v1::zone> >(msgpack::v1::zone*, std::default_delete<msgpack::v1::zone>&&) (unique_ptr.h:144)
==15847==    by 0x577CA8: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::unique_ptr(std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >&&) (unique_ptr.h:239)
==15847==    by 0x5D27A4: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E516C: std::__future_base::_Result<msgpack::v1::object_handle>::_M_set(msgpack::v1::object_handle&&) (future:258)
==15847==    by 0x5E50AA: std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&>::operator()() const (future:488)
==15847==  Address 0x5dfa878 is 40 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E2433: std::promise<msgpack::v1::object_handle>::promise() (future:1057)
==15847==    by 0x5E23EB: void __gnu_cxx::new_allocator<std::promise<msgpack::v1::object_handle> >::construct<std::promise<msgpack::v1::object_handle>>(std::promise<msgpack::v1::object_handle>*) (new_allocator.h:136)
==15847==    by 0x5E21A7: void std::allocator_traits<std::allocator<std::promise<msgpack::v1::object_handle> > >::construct<std::promise<msgpack::v1::object_handle>>(std::allocator<std::promise<msgpack::v1::object_handle> >&, std::promise<msgpack::v1::object_handle>*) (alloc_traits.h:475)
==15847==    by 0x5E1F3E: std::_Sp_counted_ptr_inplace<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<>(std::allocator<std::promise<msgpack::v1::object_handle> >) (shared_ptr_base.h:526)
==15847==    by 0x5E1D46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::promise<msgpack::v1::object_handle>*, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:637)
==15847==    by 0x5E1C65: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:1294)
==15847==    by 0x5E1C27: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:344)
==15847==    by 0x5E1BAB: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::allocate_shared<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:690)
==15847==    by 0x5E082F: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::make_shared<std::promise<msgpack::v1::object_handle>>() (shared_ptr.h:706)
==15847==    by 0x5E03BD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:211)
==15847==    by 0x5E02F2: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x5DFA878 by thread #7
==15847== Locks held: none
==15847==    at 0x577D03: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::release() (unique_ptr.h:360)
==15847==    by 0x577C83: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::unique_ptr(std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >&&) (unique_ptr.h:239)
==15847==    by 0x5D27A4: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E0509: std::future<msgpack::v1::object_handle>::get() (future:796)
==15847==    by 0x5E02FF: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==    by 0x5DDC48: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}::operator()() const (NvimClient.cpp:52)
==15847==    by 0x5DDA5C: std::_Function_handler<void (), bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::InterruptibleTaskClosure(bufstack::NvimClient*, bool)::{lambda()#1}>::_M_invoke(std::_Any_data const&) (std_function.h:316)
==15847==    by 0x5A713D: std::function<void ()>::operator()() const (std_function.h:706)
==15847==    by 0x602913: bufstack::InterruptibleTask::runElement(__gnu_cxx::__normal_iterator<std::function<void ()>*, std::vector<std::function<void ()>, std::allocator<std::function<void ()> > > >) (InterruptibleTask.cpp:48)
==15847==    by 0x602AA6: bufstack::InterruptibleTask::run() (InterruptibleTask.cpp:69)
==15847==    by 0x5EAC30: void std::__invoke_impl<void, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(std::__invoke_memfun_deref, void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:73)
==15847==    by 0x5EAB61: std::__invoke_result<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>::type std::__invoke<void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&>(void (bufstack::InterruptibleTask::*&)(), bufstack::InterruptibleTask*&) (invoke.h:95)
==15847== 
==15847== This conflicts with a previous write of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x577F88: std::_Head_base<0ul, msgpack::v1::zone*, false>::_Head_base<msgpack::v1::zone*&>(msgpack::v1::zone*&) (tuple:133)
==15847==    by 0x577F14: std::_Tuple_impl<0ul, msgpack::v1::zone*, std::default_delete<msgpack::v1::zone> >::_Tuple_impl<msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>, void>(msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>&&) (tuple:218)
==15847==    by 0x577EA1: std::tuple<msgpack::v1::zone*, std::default_delete<msgpack::v1::zone> >::tuple<msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>, true>(msgpack::v1::zone*&, std::default_delete<msgpack::v1::zone>&&) (tuple:972)
==15847==    by 0x577DB7: std::__uniq_ptr_impl<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::__uniq_ptr_impl<std::default_delete<msgpack::v1::zone> >(msgpack::v1::zone*, std::default_delete<msgpack::v1::zone>&&) (unique_ptr.h:144)
==15847==    by 0x577CA8: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::unique_ptr(std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >&&) (unique_ptr.h:239)
==15847==    by 0x5D27A4: msgpack::v1::object_handle::object_handle(msgpack::v1::object_handle&&) (object.hpp:43)
==15847==    by 0x5E516C: std::__future_base::_Result<msgpack::v1::object_handle>::_M_set(msgpack::v1::object_handle&&) (future:258)
==15847==    by 0x5E50AA: std::__future_base::_State_baseV2::_Setter<msgpack::v1::object_handle, msgpack::v1::object_handle&&>::operator()() const (future:488)
==15847==  Address 0x5dfa878 is 40 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5E2433: std::promise<msgpack::v1::object_handle>::promise() (future:1057)
==15847==    by 0x5E23EB: void __gnu_cxx::new_allocator<std::promise<msgpack::v1::object_handle> >::construct<std::promise<msgpack::v1::object_handle>>(std::promise<msgpack::v1::object_handle>*) (new_allocator.h:136)
==15847==    by 0x5E21A7: void std::allocator_traits<std::allocator<std::promise<msgpack::v1::object_handle> > >::construct<std::promise<msgpack::v1::object_handle>>(std::allocator<std::promise<msgpack::v1::object_handle> >&, std::promise<msgpack::v1::object_handle>*) (alloc_traits.h:475)
==15847==    by 0x5E1F3E: std::_Sp_counted_ptr_inplace<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<>(std::allocator<std::promise<msgpack::v1::object_handle> >) (shared_ptr_base.h:526)
==15847==    by 0x5E1D46: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::promise<msgpack::v1::object_handle>*, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:637)
==15847==    by 0x5E1C65: std::__shared_ptr<std::promise<msgpack::v1::object_handle>, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr_base.h:1294)
==15847==    by 0x5E1C27: std::shared_ptr<std::promise<msgpack::v1::object_handle> >::shared_ptr<std::allocator<std::promise<msgpack::v1::object_handle> >>(std::_Sp_make_shared_tag, std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:344)
==15847==    by 0x5E1BAB: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::allocate_shared<std::promise<msgpack::v1::object_handle>, std::allocator<std::promise<msgpack::v1::object_handle> >>(std::allocator<std::promise<msgpack::v1::object_handle> > const&) (shared_ptr.h:690)
==15847==    by 0x5E082F: std::shared_ptr<std::promise<msgpack::v1::object_handle> > std::make_shared<std::promise<msgpack::v1::object_handle>>() (shared_ptr.h:706)
==15847==    by 0x5E03BD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:211)
==15847==    by 0x5E02F2: msgpack::v1::object_handle bufstack::AbstractMsgpackClient::call<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) (AbstractMsgpackClient.hpp:233)
==15847==  Block was alloc'd by thread #7
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5E01470 by thread #1
==15847== Locks held: none
==15847==    at 0x5780D0: msgpack::v1::zone::finalizer_array::call() (cpp11_zone.hpp:38)
==15847==    by 0x578088: msgpack::v1::zone::finalizer_array::~finalizer_array() (cpp11_zone.hpp:42)
==15847==    by 0x578032: msgpack::v1::zone::~zone() (cpp11_zone.hpp:27)
==15847==    by 0x577FFA: std::default_delete<msgpack::v1::zone>::operator()(msgpack::v1::zone*) const (unique_ptr.h:78)
==15847==    by 0x5708DF: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x56FE98: msgpack::v1::object_handle::~object_handle() (object.hpp:43)
==15847==    by 0x5DEF33: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD982: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD9B8: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5E8D4E: std::default_delete<bufstack::InterruptibleTask>::operator()(bufstack::InterruptibleTask*) const (unique_ptr.h:78)
==15847==    by 0x5DFB4F: std::unique_ptr<bufstack::InterruptibleTask, std::default_delete<bufstack::InterruptibleTask> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x5DCCCB: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==  Address 0x5e01470 is 32 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C30F2F: malloc (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x570544: msgpack::v1::zone::operator new(unsigned long) (cpp11_zone.hpp:189)
==15847==    by 0x5DB6B4: bufstack::MsgpackUtil::clone(msgpack::v2::object const&) (MsgpackUtil.cpp:20)
==15847==    by 0x5E4CAF: bufstack::ConvertResponseValue<msgpack::v1::object_handle>::operator()(std::shared_ptr<std::promise<msgpack::v1::object_handle> >, msgpack::v2::object const&) (AbstractMsgpackClient.hpp:53)
==15847==    by 0x5E4607: void bufstack::AbstractMsgpackClient::convertResponseValue<msgpack::v1::object_handle>(std::shared_ptr<std::promise<msgpack::v1::object_handle> >, msgpack::v2::object const&) (AbstractMsgpackClient.hpp:108)
==15847==    by 0x5E3EDB: bool bufstack::AbstractMsgpackClient::setResponseValue<msgpack::v1::object_handle>(unsigned int, std::shared_ptr<std::promise<msgpack::v1::object_handle> >, bufstack::MsgpackRpc::ResponseMessage const&, bufstack::Loggable&) (AbstractMsgpackClient.hpp:142)
==15847==    by 0x5E3BF2: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:218)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==  Block was alloc'd by thread #6
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5E01480 by thread #1
==15847== Locks held: none
==15847==    at 0x5780E3: msgpack::v1::zone::finalizer_array::call() (cpp11_zone.hpp:39)
==15847==    by 0x578088: msgpack::v1::zone::finalizer_array::~finalizer_array() (cpp11_zone.hpp:42)
==15847==    by 0x578032: msgpack::v1::zone::~zone() (cpp11_zone.hpp:27)
==15847==    by 0x577FFA: std::default_delete<msgpack::v1::zone>::operator()(msgpack::v1::zone*) const (unique_ptr.h:78)
==15847==    by 0x5708DF: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x56FE98: msgpack::v1::object_handle::~object_handle() (object.hpp:43)
==15847==    by 0x5DEF33: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD982: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD9B8: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5E8D4E: std::default_delete<bufstack::InterruptibleTask>::operator()(bufstack::InterruptibleTask*) const (unique_ptr.h:78)
==15847==    by 0x5DFB4F: std::unique_ptr<bufstack::InterruptibleTask, std::default_delete<bufstack::InterruptibleTask> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x5DCCCB: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==  Address 0x5e01480 is 48 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C30F2F: malloc (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x570544: msgpack::v1::zone::operator new(unsigned long) (cpp11_zone.hpp:189)
==15847==    by 0x5DB6B4: bufstack::MsgpackUtil::clone(msgpack::v2::object const&) (MsgpackUtil.cpp:20)
==15847==    by 0x5E4CAF: bufstack::ConvertResponseValue<msgpack::v1::object_handle>::operator()(std::shared_ptr<std::promise<msgpack::v1::object_handle> >, msgpack::v2::object const&) (AbstractMsgpackClient.hpp:53)
==15847==    by 0x5E4607: void bufstack::AbstractMsgpackClient::convertResponseValue<msgpack::v1::object_handle>(std::shared_ptr<std::promise<msgpack::v1::object_handle> >, msgpack::v2::object const&) (AbstractMsgpackClient.hpp:108)
==15847==    by 0x5E3EDB: bool bufstack::AbstractMsgpackClient::setResponseValue<msgpack::v1::object_handle>(unsigned int, std::shared_ptr<std::promise<msgpack::v1::object_handle> >, bufstack::MsgpackRpc::ResponseMessage const&, bufstack::Loggable&) (AbstractMsgpackClient.hpp:142)
==15847==    by 0x5E3BF2: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:218)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==  Block was alloc'd by thread #6
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5E01468 by thread #1
==15847== Locks held: none
==15847==    at 0x570A60: msgpack::v1::zone::chunk_list::~chunk_list() (cpp11_zone.hpp:124)
==15847==    by 0x578042: msgpack::v1::zone::~zone() (cpp11_zone.hpp:27)
==15847==    by 0x577FFA: std::default_delete<msgpack::v1::zone>::operator()(msgpack::v1::zone*) const (unique_ptr.h:78)
==15847==    by 0x5708DF: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x56FE98: msgpack::v1::object_handle::~object_handle() (object.hpp:43)
==15847==    by 0x5DEF33: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD982: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD9B8: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5E8D4E: std::default_delete<bufstack::InterruptibleTask>::operator()(bufstack::InterruptibleTask*) const (unique_ptr.h:78)
==15847==    by 0x5DFB4F: std::unique_ptr<bufstack::InterruptibleTask, std::default_delete<bufstack::InterruptibleTask> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x5DCCCB: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==    by 0x57D15B: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==  Address 0x5e01468 is 24 bytes inside a block of size 56 alloc'd
==15847==    at 0x4C30F2F: malloc (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x570544: msgpack::v1::zone::operator new(unsigned long) (cpp11_zone.hpp:189)
==15847==    by 0x5DB6B4: bufstack::MsgpackUtil::clone(msgpack::v2::object const&) (MsgpackUtil.cpp:20)
==15847==    by 0x5E4CAF: bufstack::ConvertResponseValue<msgpack::v1::object_handle>::operator()(std::shared_ptr<std::promise<msgpack::v1::object_handle> >, msgpack::v2::object const&) (AbstractMsgpackClient.hpp:53)
==15847==    by 0x5E4607: void bufstack::AbstractMsgpackClient::convertResponseValue<msgpack::v1::object_handle>(std::shared_ptr<std::promise<msgpack::v1::object_handle> >, msgpack::v2::object const&) (AbstractMsgpackClient.hpp:108)
==15847==    by 0x5E3EDB: bool bufstack::AbstractMsgpackClient::setResponseValue<msgpack::v1::object_handle>(unsigned int, std::shared_ptr<std::promise<msgpack::v1::object_handle> >, bufstack::MsgpackRpc::ResponseMessage const&, bufstack::Loggable&) (AbstractMsgpackClient.hpp:142)
==15847==    by 0x5E3BF2: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:218)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==  Block was alloc'd by thread #6
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during read of size 8 at 0x5E36270 by thread #1
==15847== Locks held: none
==15847==    at 0x570A77: msgpack::v1::zone::chunk_list::~chunk_list() (cpp11_zone.hpp:126)
==15847==    by 0x578042: msgpack::v1::zone::~zone() (cpp11_zone.hpp:27)
==15847==    by 0x577FFA: std::default_delete<msgpack::v1::zone>::operator()(msgpack::v1::zone*) const (unique_ptr.h:78)
==15847==    by 0x5708DF: std::unique_ptr<msgpack::v1::zone, std::default_delete<msgpack::v1::zone> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x56FE98: msgpack::v1::object_handle::~object_handle() (object.hpp:43)
==15847==    by 0x5DEF33: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD982: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5DD9B8: bufstack::NvimClient::asyncOnConnect(bool)::InterruptibleTaskClosure::~InterruptibleTaskClosure() (NvimClient.cpp:79)
==15847==    by 0x5E8D4E: std::default_delete<bufstack::InterruptibleTask>::operator()(bufstack::InterruptibleTask*) const (unique_ptr.h:78)
==15847==    by 0x5DFB4F: std::unique_ptr<bufstack::InterruptibleTask, std::default_delete<bufstack::InterruptibleTask> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x5DCCCB: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==    by 0x57D15B: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==  Address 0x5e36270 is 0 bytes inside a block of size 80,137 alloc'd
==15847==    at 0x4C30F2F: malloc (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x5764B7: msgpack::v1::zone::allocate_expand(unsigned long) (cpp11_zone.hpp:281)
==15847==    by 0x5762E1: msgpack::v1::zone::allocate_align(unsigned long, unsigned long) (cpp11_zone.hpp:245)
==15847==    by 0x5DBDA8: msgpack::v1::adaptor::object_with_zone<msgpack::v2::object, void>::operator()(msgpack::v1::object::with_zone&, msgpack::v2::object const&) const (object.hpp:365)
==15847==    by 0x5DBB33: _ZN7msgpack2v1lsINS_2v26objectEEENSt9enable_ifIXntsr8is_arrayIT_EE5valueEvE4typeERNS0_6object9with_zoneERKS5_ (adaptor_base.hpp:101)
==15847==    by 0x5DBAA8: msgpack::v1::object::object<msgpack::v2::object>(msgpack::v2::object const&, msgpack::v1::zone&) (object.hpp:628)
==15847==    by 0x5DBA0F: msgpack::v2::object::object<msgpack::v2::object>(msgpack::v2::object const&, msgpack::v1::zone&) (object_fwd.hpp:49)
==15847==    by 0x5DBD65: msgpack::v1::adaptor::object_with_zone<msgpack::v2::object, void>::operator()(msgpack::v1::object::with_zone&, msgpack::v2::object const&) const (object.hpp:360)
==15847==    by 0x5DBB33: _ZN7msgpack2v1lsINS_2v26objectEEENSt9enable_ifIXntsr8is_arrayIT_EE5valueEvE4typeERNS0_6object9with_zoneERKS5_ (adaptor_base.hpp:101)
==15847==    by 0x5DBAA8: msgpack::v1::object::object<msgpack::v2::object>(msgpack::v2::object const&, msgpack::v1::zone&) (object.hpp:628)
==15847==    by 0x5DBA0F: msgpack::v2::object::object<msgpack::v2::object>(msgpack::v2::object const&, msgpack::v1::zone&) (object_fwd.hpp:49)
==15847==    by 0x5DBE54: msgpack::v1::adaptor::object_with_zone<msgpack::v2::object, void>::operator()(msgpack::v1::object::with_zone&, msgpack::v2::object const&) const (object.hpp:375)
==15847==  Block was alloc'd by thread #6
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x5DF6BD0 by thread #1
==15847== Locks held: none
==15847==    at 0x5C4C1B: bufstack::MsgpackClient::~MsgpackClient() (MsgpackClient.cpp:22)
==15847==    by 0x5DCD1D: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==    by 0x57D15B: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x57CB42: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x57CB98: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x5947FE: std::default_delete<bufstack::NvimClient>::operator()(bufstack::NvimClient*) const (unique_ptr.h:78)
==15847==    by 0x5943BF: std::unique_ptr<bufstack::NvimClient, std::default_delete<bufstack::NvimClient> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x5941B0: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:25)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847== 
==15847== This conflicts with a previous read of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5E3BDD: std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}::operator()(bufstack::MsgpackRpc::ResponseMessage const&) const (AbstractMsgpackClient.hpp:221)
==15847==    by 0x5E3941: std::_Function_handler<bool (bufstack::MsgpackRpc::ResponseMessage), std::future<msgpack::v1::object_handle> bufstack::AbstractMsgpackClient::asyncCall<msgpack::v1::object_handle>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)::{lambda(bufstack::MsgpackRpc::ResponseMessage const&)#1}>::_M_invoke(std::_Any_data const&, bufstack::MsgpackRpc::ResponseMessage&&) (std_function.h:301)
==15847==    by 0x59ECAA: std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>::operator()(bufstack::MsgpackRpc::ResponseMessage) const (std_function.h:706)
==15847==    by 0x59AC0E: bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}::operator()(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&) const (AbstractMsgpackClient.cpp:81)
==15847==    by 0x59A95F: bool __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>::operator()<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > >(__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >) (predefined_ops.h:283)
==15847==    by 0x59AB7C: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, std::random_access_iterator_tag) (stl_algo.h:148)
==15847==    by 0x59A918: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__find_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:161)
==15847==    by 0x59A79F: __gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > > std::__remove_if<__gnu_cxx::__normal_iterator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>*, std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > > >, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}> >(__gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>, __gnu_cxx::__ops::_Iter_pred<bufstack::AbstractMsgpackClient::onReceiveResponseMsg(bufstack::MsgpackRpc::ResponseMessage const&)::$_4::operator()(std::vector<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>, std::allocator<std::function<bool (bufstack::MsgpackRpc::ResponseMessage)> > >&) const::{lambda(std::function<bool (bufstack::MsgpackRpc::ResponseMessage)>&)#1}>) (stl_algo.h:863)
==15847==  Address 0x5df6bd0 is 0 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== ----------------------------------------------------------------
==15847== 
==15847== Possible data race during write of size 8 at 0x5DF6D78 by thread #1
==15847== Locks held: none
==15847==    at 0x5C4C29: bufstack::MsgpackClient::~MsgpackClient() (MsgpackClient.cpp:22)
==15847==    by 0x5DCD1D: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==    by 0x57D15B: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x57CB42: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x57CB98: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x5947FE: std::default_delete<bufstack::NvimClient>::operator()(bufstack::NvimClient*) const (unique_ptr.h:78)
==15847==    by 0x5943BF: std::unique_ptr<bufstack::NvimClient, std::default_delete<bufstack::NvimClient> >::~unique_ptr() (unique_ptr.h:268)
==15847==    by 0x5941B0: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:25)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847== 
==15847== This conflicts with a previous read of size 8 by thread #6
==15847== Locks held: none
==15847==    at 0x5D4D6C: bufstack::MsgpackReceiver::handleResponseMessage(std::vector<msgpack::v2::object, std::allocator<msgpack::v2::object> > const&) (MsgpackReceiver.cpp:76)
==15847==    by 0x5D5794: bufstack::MsgpackReceiver::onRecvMsg(msgpack::v2::object const&) (MsgpackReceiver.cpp:153)
==15847==    by 0x59886B: bufstack::AbstractMsgpackClient::onDecodeCallback(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (AbstractMsgpackClient.cpp:15)
==15847==    by 0x59D198: void std::__invoke_impl<void, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(std::__invoke_memfun_deref, void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:73)
==15847==    by 0x59D066: std::__invoke_result<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>::type std::__invoke<void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>(void (bufstack::AbstractMsgpackClient::*&)(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), bufstack::AbstractMsgpackClient*&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (invoke.h:95)
==15847==    by 0x59CFC7: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::__call<void, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, 0ul, 1ul>(std::tuple<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&>&&, std::_Index_tuple<0ul, 1ul>) (functional:467)
==15847==    by 0x59CF2C: void std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)>::operator()<std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&, void>(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (functional:549)
==15847==    by 0x59CB21: std::_Function_handler<void (std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&), std::_Bind<void (bufstack::AbstractMsgpackClient::*(bufstack::AbstractMsgpackClient*, std::_Placeholder<1>))(std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&)> >::_M_invoke(std::_Any_data const&, std::vector<std::reference_wrapper<msgpack::v2::object const>, std::allocator<std::reference_wrapper<msgpack::v2::object const> > > const&) (std_function.h:316)
==15847==  Address 0x5df6d78 is 424 bytes inside a block of size 528 alloc'd
==15847==    at 0x4C3159F: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x57BAC5: std::unique_ptr<bufstack::MockNvimClient, std::default_delete<bufstack::MockNvimClient> > make_unique<bufstack::MockNvimClient, std::shared_ptr<bufstack::ClientEmbeddedConnection>&>(std::shared_ptr<bufstack::ClientEmbeddedConnection>&) (Util.hpp:203)
==15847==    by 0x57AE38: bufstack::NvimConnectionTest::getClientInstance() (NvimConnectionTest.cpp:37)
==15847==    by 0x5941A7: bufstack::RemoteFunctionTests_TestGetClientInstance_Test::TestBody() (RemoteFunctionTests.cpp:24)
==15847==    by 0x63CC7D: void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x6283DA: void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) (gtest.cc:2438)
==15847==    by 0x60F7AB: testing::Test::Run() (gtest.cc:2474)
==15847==    by 0x6104D5: testing::TestInfo::Run() (gtest.cc:2656)
==15847==    by 0x610B9B: testing::TestCase::Run() (gtest.cc:2774)
==15847==    by 0x6183F3: testing::internal::UnitTestImpl::RunAllTests() (gtest.cc:4649)
==15847==    by 0x6406AD: bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2402)
==15847==    by 0x62A67A: bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) (gtest.cc:2438)
==15847==  Block was alloc'd by thread #1
==15847== 
==15847== 
==15847== Process terminating with default action of signal 2 (SIGINT)
==15847==    at 0x578ED2D: __pthread_timedjoin_ex (pthread_join_common.c:89)
==15847==    by 0x4C33C65: ??? (in /usr/lib/valgrind/vgpreload_helgrind-amd64-linux.so)
==15847==    by 0x4F009B6: std::thread::join() (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==15847==    by 0x59B4B8: bufstack::MsgpackFdReader::join() (MsgpackFdReader.hpp:56)
==15847==    by 0x599554: bufstack::AbstractMsgpackClient::~AbstractMsgpackClient() (AbstractMsgpackClient.cpp:88)
==15847==    by 0x5C4C73: bufstack::MsgpackClient::~MsgpackClient() (MsgpackClient.cpp:22)
==15847==    by 0x5DCD1D: bufstack::NvimClient::~NvimClient() (NvimClient.cpp:160)
==15847==    by 0x57D15B: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x57CB42: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x57CB98: bufstack::MockNvimClient::~MockNvimClient() (MockNvimClient.hpp:12)
==15847==    by 0x5947FE: std::default_delete<bufstack::NvimClient>::operator()(bufstack::NvimClient*) const (unique_ptr.h:78)
==15847==    by 0x5943BF: std::unique_ptr<bufstack::NvimClient, std::default_delete<bufstack::NvimClient> >::~unique_ptr() (unique_ptr.h:268)
==15847== 
==15847== For counts of detected and suppressed errors, rerun with: -v
==15847== Use --history-level=approx or =none to gain increased speed, at
==15847== the cost of reduced accuracy of conflicting-access information
==15847== ERROR SUMMARY: 31 errors from 30 contexts (suppressed: 66 from 33)
